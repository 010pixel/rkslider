<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Image Slider</title>
<script type="text/javascript" src="jquery.min.js"></script>
<link type="text/css" href="bootstrap.min.css" />

<style type="text/css">
.slider-wrap {width:100%; max-width:3000px; margin:0 auto; background:#333; overflow:hidden;}
.myslider {width:1000px; margin:0px auto; border-top:10px solid #f0f;}
.myslider .container {width:100%; list-style:none; margin:0; padding:0; display:table; margin-left:0px; border-bottom:5px solid #F00;}
.myslider .container div {width:100%; padding-top:(100% * 9/16); display:table-cell; box-sizing:border-box; opacity:0.2; border-top: 2px solid #00F;
-webkit-transition: all 0.3s ease-out;
-moz-transition: all 0.3s ease-out;
transition: all 0.3s ease-out;
}
.myslider .container div:hover {opacity:0.6;}
.myslider .container div img {height:400px; width:1000px;}
.myslider .container div.active {opacity:1;}

span {padding:5px; background:#CCC;}
</style>

<script>
(function ($) {
	
	var opts = {},
		docWidth,
		sliderWidth,
		elements,
		totalElements,
		currentElement,
		rotation,
		free = true,
		paused = false,
		index = 0,
		
		_set_config = function () {
			opts = $.extend($.fn.rkslides.defaults, opts);
		},
		
		_set_free = function () {free = true;},
		_set_busy = function () {free = false;},
		_is_busy = function () {return !free;},

		_set_defaults = function () {
			docWidth = $(document).width();
			sliderWidth = $(opts.slider).width();
			// console.log('Doc width: ' + docWidth);
			// console.log('Slider width: ' + sliderWidth);
		},
		
		_init = function () {
				elements = $(opts.slideContainer).children();
				totalElements = elements.size();				
				if ( totalElements > 1 ) {
					 if (opts.auto == true) { _cycle_slides(); }
					 if (opts.pause == true) { _play_pause_slides(); }
				}
			},
		
		/*
		_set_offset = function () {
				elements.each(function(){
					var leftOffset = $(this).offset().left;
					$(this).attr({'left-offset':leftOffset});
				});
			}
		*/
		
		_set_basic_events = function () {
				$(document).ready(function() {
					_set_defaults();
					// _set_offset();
					_goto_slide(0);
				});
				$(window).resize(function() {
					_set_defaults();
					// _set_offset();
				});
				// Go to slide when clicked an element
				elements.click(function(){
					_goto_slide($(this).index());
				});
				// Previous Next functions keyboard support
				if (opts.prevNext == true) {
					if (opts.keyboardSupport == true) {
						$('body').bind('keydown', function (e) {
							if (e.keyCode == 37) { // left
								$.rkslides.prev();
							} else if (e.keyCode == 39) { // right
								$.rkslides.next();
							}
						});
					}
					$(opts.btnPrev).click(function(){
						$.rkslides.prev();
					});
					$(opts.btnNext).click(function(){
						$.rkslides.next();
					});
				}
				// Play Pause Stop functions
				if (opts.pause == true) {
					$(opts.btnPlay).click(function(){
						$.rkslides.play();
					});
					$(opts.btnPause).click(function(){
						$.rkslides.pause();
					});
					$(opts.btnStop).click(function(){
						$.rkslides.stop();
					});
				}
			},
		
		_get_current_element = function () {
			return currentElement;
		},
		
		_clear_interval = function () {
			clearInterval(rotation);
		},
		
		_cycle_slides = function () {
			rotation = setInterval(_run_slides, opts.timeout);
		},
		
		_run_slides = function () {
			if ( paused ) return false;
		
			elements.stop(true, true);
			
			var idx = index + 1 < totalElements ? index + 1 : 0;
			// console.log(idx);
			
			var thisSlide = elements.eq(idx);						
			_goto_slide(idx); 
		},
		
		_play_pause_slides = function () {
			$(opts.slideContainer).children().hover(function () {
				// console.log("enter");
				if ($(this).hasClass("active")) {
					_pause_slides();
				}
			}, function () {
				// console.log("leave");
				_play_slides();
			});
		},
		
		_play_slides = function () {
			if ( paused == true ) {
				// console.log("started");
				paused = false;
				_cycle_slides();
			}
		},
		
		_pause_slides = function () {
			// console.log("paused");
			paused = true;
			_clear_interval();
		},
		
		_stop_slides = function () {
			// console.log("stopped");
			paused = true;
			_goto_slide(0);
			_clear_interval();
		},
		
		_goto_slide = function (idx) {
				
				if ( _is_busy() ) { return; }
				_set_busy();
				
				var thisSlide = elements.eq(idx);						
				var sliderLeftOffset = (docWidth - sliderWidth)/2;
				var leftOffset = $(thisSlide).attr('left-offset');
				var appliedLeftOffset = parseInt(leftOffset) - parseInt(sliderLeftOffset);
				var appliedLeftOffset = idx * sliderWidth;
				
				// var currItemWidth = thisSlide.width();
				// console.log('Slider Left Offset: ' + sliderLeftOffset); console.log('Item width: ' + currItemWidth); console.log('Left Offset: ' + leftOffset); console.log('Applied Left Offset: ' + appliedLeftOffset);
				
				currentElement = thisSlide;
				
				elements.removeClass('active');
				$(thisSlide).addClass('active').parent().animate({'margin-left':'-'+ appliedLeftOffset +'px'}, opts.speed, function() {
					index = $(thisSlide).index();
					_set_free();
					// console.log(opts.timeout);
				});
			},
		
		_activate_slide = function (thisSlide) {
				if ( thisSlide == undefined ) {
					thisSlide = elements.eq(0);
				}
				elements.removeClass('active');
				$(thisSlide).addClass('active');
			},
		
		_prev_next = function (direction) {
			if (opts.prevNext == false) return false;
			var idx = 0;
			if ( direction == "prev" ) {
				idx = index - 1 >= 0 ? index - 1 : totalElements - 1;
			} else {
				idx = index + 1 < totalElements ? index + 1 : 0;
			}
			_clear_interval();
			_cycle_slides();
			_goto_slide(idx);
		}
		;
	
	
	$.fn.rkslides = function (options) {
        opts = options;
        $.rkslides.init();
    };

    $.rkslides = function (options) {
			$.fn.rkslides(options);
		};
		
	$.rkslides.init = function () {
			_set_config();
			_init();
			_set_basic_events();
		};
		
	$.rkslides.prev = function () {
			_prev_next("prev");
		};
	
	$.rkslides.next = function () {
			_prev_next("next");
		};
		
	$.rkslides.play = function () {
			_play_slides();
		};
	
	$.rkslides.pause = function () {
			_pause_slides();
		};
	
	$.rkslides.stop = function () {
			_stop_slides();
		};

	$.fn.rkslides.defaults = {
			slide:'.div',
			slider:'.myslider',
			slideContainer:'.container',
			controllers:'',
			visibleClass:"active",

			paging:true,
			pause:true,
			prevNext:true,
			keyboardSupport:false,
			btnPrev:'.btn-prev',
			btnNext:'.btn-next',
			btnPlay:'.btn-play',
			btnPause:'.btn-pause',
			btnStop:'.btn-stop',

			auto:true,
			speed: 300,
			timeout: 2000,
			userClickTimeout: 10000,
			maxWidth:''
		};
})(jQuery);

$(function() {
	$.rkslides();
});
</script>
</head>

<body>
<div class="slider-wrap">
    <div class="myslider">
        <div class="container">
            <div><img src="http://placehold.it/1000x400" /></div>
            <div><img src="http://placehold.it/1000x401" /></div>
            <div><img src="http://placehold.it/1000x402" /></div>
            <div><img src="http://placehold.it/1000x403" /></div>
            <div><img src="http://placehold.it/1000x404" /></div>
            <div><img src="http://placehold.it/1000x405" /></div>
            <div><img src="http://placehold.it/1000x406" /></div>
            <div><img src="http://placehold.it/1000x407" /></div>
        </div>
    </div>
</div>

<span class="btn-play">Play</span> &nbsp;
<span class="btn-pause">pause</span> &nbsp;
<span class="btn-stop">stop</span> &nbsp;
<span class="btn-prev">Prev</span> &nbsp;
<span class="btn-next">Next</span> &nbsp;


<a href="http://www.typicallyspanish.com/royalslider/templates/visible-nearby/">Reference</a>
</body>
</html>
